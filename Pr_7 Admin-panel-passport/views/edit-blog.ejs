<%- include('header') %>

<div class="page-wrapper">
  <div class="page-breadcrumb">
    <div class="row">
      <div class="col-12 d-flex no-block align-items-center">
        <h4 class="page-title">Edit Blog</h4>
      </div>
    </div>
  </div>

  <div class="container-fluid">
    <div class="card">
      <div class="card-body">
        <% if (blog) { %>
          <form action="/blog/update-blog/<%= blog._id %>" method="POST" enctype="multipart/form-data">

            <div class="form-group mb-3">
              <label>Title</label>
              <input type="text" name="title" value="<%= blog.title %>" class="form-control" required>
            </div>

            <div class="form-group mb-3">
              <label>Category</label>
              <input type="text" name="category" value="<%= blog.category %>" class="form-control" required>
            </div>

            <div class="form-group mb-3">
              <label>Language</label>
              <input type="text" name="language" value="<%= blog.language %>" class="form-control" required>
            </div>

            <div class="form-group mb-3">
              <label>Content</label>
              <textarea name="content" class="form-control" rows="6"><%= blog.content %></textarea>
            </div>

            <% if (blog.image) { %>
              <div class="form-group mb-3">
                <label>Current Image:</label><br>
                <img src="<%= blog.image.startsWith('/uploads/') ? blog.image : '/uploads/' + blog.image %>" 
                     alt="Blog Image" 
                     style="width:150px;height:100px;object-fit:cover;border-radius:8px;">
              </div>
            <% } %>

            <div class="form-group mb-3">
              <label>Change Image</label>
              <input type="file" name="image" class="form-control">
            </div>

            <button type="submit" class="btn btn-success mt-3">Update Blog</button>
            <a href="/blog/my-blogs" class="btn btn-secondary mt-3">Cancel</a>

          </form>
        <% } else { %>
          <div class="alert alert-danger">No blog found to edit.</div>
        <% } %>
      </div>
    </div>
  </div>
</div>

<%- include('footer') %>
